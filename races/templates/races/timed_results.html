{% extends "base.html" %}
{% block content %}

<h3>Timed Results â€“ {{ race }}</h3>

<!-- Attempt selector -->
{% if state.total_attempts > 1 %}
<div class="mb-3">
    <strong>Attempts:</strong>
    {% for i in attempt_numbers %}
        <a href="?attempt={{ i }}"
           class="btn btn-sm {% if i == state.attempt %}btn-primary{% else %}btn-outline-primary{% endif %}">
            Attempt {{ i }}
        </a>
    {% endfor %}
</div>
{% endif %}


{% if preview %}

<table class="table table-sm table-striped align-middle">
    <thead>
        <tr>
            <th>Pos</th>
            <th>Boat</th>
            <th>Helm</th>
            <th>Laps</th>
            <th>Elapsed</th>
            <th>Corrected</th>
        </tr>
    </thead>
    <tbody>
        {% for row in preview %}
        <tr>
            <td><strong>{{ row.position }}</strong></td>
            <td>
                {{ row.sail }}
            </td>
            <td>
                {{ row.helm }}
            </td>
            <td>
                {{ row.laps }}
            </td>
            <td>
                {{ row.elapsed|floatformat:0 }}
            </td>
            <td>
                {{ row.corrected|floatformat:1 }}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<form method="post" class="mt-3">
    {% csrf_token %}
    <button class="btn btn-success">
        Save Timed Result Set
    </button>
</form>

{% else %}

<div class="alert alert-warning mt-3">
    No valid laps recorded for this attempt.
</div>

{% endif %}

{% endblock %}
